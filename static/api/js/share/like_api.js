window._bd_share_main.F.module("share/like_api",function(e,n,t){e("base/tangram").T;var i=e("base/class").Class,a=e("share/api_base");n.Api=i.create(function(e){var i=this,a={count:0,clicked:!1};i._init=function(){var n,t=i.getView();t.render(),t.init(),n=function(e){a.count=e.count,t.setNumber(e.count)},window._bd_share_main.F.use("trans/data",function(e){e.get({type:"like_count",url:document.location.href,callback:function(e){n&&n({count:e})}})})},i._processAction=function(n){var t;"like"==n.cmd&&(a.clicked?i.getView().showDoneState(n.element):(t=function(e){a.clicked=!0,0==e.err?(a.count++,i.getView().addOne(n.element,a.count)):i.getView().showDoneState(n.element)},window._bd_share_main.F.use("trans/trans",function(e){e.run({type:"like",url:document.location.href,callback:function(e){t&&t({err:e})}})})))}},a.ApiBase)});